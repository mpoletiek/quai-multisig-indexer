# Quai Multisig Indexer - Mainnet Configuration
# Copy this file to .env and fill in your values

# ============================================
# QUAI NETWORK (Mainnet)
# ============================================
QUAI_RPC_URL=https://rpc.quai.network/cyprus1
QUAI_WS_URL=wss://rpc.quai.network/cyprus1

# ============================================
# SUPABASE
# ============================================
# Get these from your Supabase project settings
# Option 1: Use same project with different schema (recommended)
# Option 2: Use separate Supabase project for complete isolation
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_KEY=your-service-role-key-here

# Database schema for multi-network support
# Use 'mainnet' for mainnet data (separate from testnet)
# First run: SELECT create_network_schema('mainnet'); in Supabase SQL Editor
SUPABASE_SCHEMA=mainnet

# ============================================
# CONTRACT ADDRESSES (Mainnet)
# ============================================
# Required: Core contracts
PROXY_FACTORY_ADDRESS=0x0000000000000000000000000000000000000000
MULTISIG_IMPLEMENTATION_ADDRESS=0x0000000000000000000000000000000000000000

# Optional: Module contracts (leave empty if not deployed)
DAILY_LIMIT_MODULE_ADDRESS=
WHITELIST_MODULE_ADDRESS=
SOCIAL_RECOVERY_MODULE_ADDRESS=

# ============================================
# INDEXER SETTINGS
# ============================================
# Block number to start indexing from (use deployment block of ProxyFactory)
START_BLOCK=0

# Number of blocks to process per batch during backfill
BATCH_SIZE=1000

# Milliseconds between poll cycles for new blocks
POLL_INTERVAL=5000

# Number of block confirmations before indexing (for reorg safety)
# Mainnet may want higher confirmations for safety
CONFIRMATIONS=3

# ============================================
# HEALTH CHECK
# ============================================
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PORT=3002

# Alert if indexer falls this many blocks behind (ignored during sync)
HEALTH_MAX_BLOCKS_BEHIND=100

# ============================================
# RATE LIMITING (Advanced)
# ============================================
# Maximum RPC requests per time window (default: 50)
# RATE_LIMIT_REQUESTS=50

# Time window in milliseconds (default: 1000 = 1 second)
# RATE_LIMIT_WINDOW_MS=1000

# ============================================
# CACHING (Advanced)
# ============================================
# Maximum number of block timestamps to cache (default: 1000)
# TIMESTAMP_CACHE_SIZE=1000
